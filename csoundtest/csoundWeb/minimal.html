<!DOCTYPE html>
<html>
<!--
 csound.js minimal example
 Copyright (C) 2017 V Lazzarini
-->

<head>
  <title>WebAudio Csound</title>
  


  </style>
  <script type="text/javascript" src="js/csound.js"></script>
  <script type="text/javascript">
    // called by csound.js
    function moduleDidLoad() {
      csound.Play();
      csound.CompileOrc(
        "maxalloc 1,10 \n" +
        "massign 1,1\n" +
        "instr 1 \n" +
        "icps = 440+rnd(440) \n" +
        "chnset icps, \"freq\" \n" +
        "a2 linen  0.1,0.01,p3,0.1 \n" +
        "a1 oscili a2, icps\n" +
        "outs a1,a1 \n" +
        "endin");
     
    }

    function attachListeners() {
document.getElementById('button').addEventListener("click", Play);
    }

    var count = 0;

   

    var started = false;
    // click handler
    function Play() {
      if (started == false) {
        CSOUND_AUDIO_CONTEXT.resume();
        started = true;
      }
      csound.Event("i 1 0 5");
    }
  </script>


</head>

<body>
  <div id="clickarea">
    <H1> Minimal </H1>
    <h3 id="tit"> </h3>
<button id="button">play</button>
 
  </div>
</body>

</html>
